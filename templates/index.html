<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>Your Dream Houses</title>

	<meta name="description" content="Source code generated using layoutit.com">
	<meta name="author" content="LayoutIt!">

	<link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
	<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

	<!-- <link rel="stylesheet" href={{cdn_css}} type="text/css"> -->
	<script type="text/javascript" src={{cdn_js}} crossorigin="anonymous"></script>

	<link href="https://fonts.googleapis.com/css?family=Merriweather|Montserrat|Sacramento" rel="stylesheet">

</head>

<body>
	<script>
		window.onload = function jump(){
			var top = document.getElementById('{{anchor}}').offsetTop; //Getting Y of target element
			window.scrollTo(0, top);                        //Go there.
		}
	</script>

	<div class="top-container" id="top">
      <div class="title-text">
        <h1>New York Airbnb</h1>
        <h2>find your dream house</h2>
      </div>
    </div>
	<div class="middle-container" >
		<!--<div class="background">
			<h3>Background</h3>
            <p class="intro">
				The housing rental market in New York City is gradually recovering after a rough time during the pandemic. Although the city has undergone several difficulties during the past two years, including rising property taxes, business shutdowns, etc, it's still one of the most competitive property markets in the U.S. Moreover, with a large amount of effort we made in fighting against coronavirus, we are gradually recovering and moving towards our regular life.
			With that being said, the economy in NYC revives: there is the reopening of restaurants, the growth of tourist industries, and the rapid rising of housing rentals. It is crucial for travelers, long-term tenants, and landlords to understand the housing rental trend in NYC and locate their desired rooms, either to stay for a few nights or to invest for future profits.
			</p>
       	</div>-->
		<div class="Question-to-investigate">
        	<h3>Question to investigate</h3>
        	<p class="intro">
				We would like to provide local hosts and renters with a personalized and interactive system that helps filter and choose certain properties while giving a reference price. <br>This system will be deployed on AWS servers and will include sophisticated modules for data pipeline, analytical models, results, visualization, and interactive on-the-fly analysis.
			</p>
      	</div>
		<div class="User-Story">
        	<h3> User Story</h3>
        	<p class="intro">
				As a travel/renter who wants to get the best housing offerings in the NYC Airbnb rental market, I would like to receive more information from multiple perspectives that could help me decide on the item with the highest return. To be more specific, I expect the system to perform several functions:
			</p>
			<p class="userstory_body">
				1. The system can automatically analyze the Airbnb data based on user input (i.e. expected neighborhood or price range), such that users can make informed decisions based on our analysis.
			</p>
			<p class="userstory_body">
				2. The system can automatically recommend the best rental prices based on user inputs and learned features of the NYC Airbnb market.
			</p>
      	</div>
    </div>

	<div class="container-fluid" id="finder">
		<div class="row">
			<div class="col-md-12">
				<h3>
					Your Dream House Finder <br>
				</h3>
			</div>
		</div>
		<div class="row">
			<div class="col-md-3">
				<form role="form" method="post">
					<!--<button type="submit" class="btn btn-primary">
						Search
					</button>
					<button type="reset" class="btn btn-primary">
						Reset
					</button>-->

					<div class="checkbox">
						<b>Please Select your Room Type:</b> <br>

						{% for roomType in roomTypeSet %}
							<input type="checkbox" name="roomType" value="{{ roomType }}" {{ "checked" if roomType in selected_RT }}> {{ roomType }} <br>
						{% endfor %}

						<br>
					</div>

					<div class="checkbox" id="neighbourhoodGroup">
						<b>Please Select your Neighbourhood Group: </b><br>

						{% for neighbourhoodGroup in neighbourhoodGroupSet %}
						<input type="checkbox" name="neighbourhoodGroup" value="{{ neighbourhoodGroup }}"
							onclick="onClickHander(this)">
						{{ neighbourhoodGroup }} <br>
						{% endfor %}
						<br>
					</div>

					<div class="dropdown">
						<script>
							var ngSelectedSet = new Set();
							var ngMap = JSON.parse('{{ng_dict|tojson}}');

							function onClickHander(obj) {
								if (obj.checked) {
									ngSelectedSet.add(obj.value);
									changeDropdown('add', obj.value);
								} else {
									ngSelectedSet.delete(obj.value);
									changeDropdown('remove', obj.value);
								}
							}
						</script>

						<b>Please Select your desired Neighbourhood: </b><br>
						<select id="neighbourhoodSelect" name="neighbourhood"> 
							<option value="none" selected disabled hidden> Neighbourhood </option>
						</select>

						<script>
							function changeDropdown(op, ng_group) {
								var select = document.getElementById("neighbourhoodSelect");
								for (var ng of ngMap[ng_group]) {
									if (op == 'add') {
										var option = document.createElement("option");
										option.text = ng;
										option.name = ng;
										option.value = ng;
										select.add(option);
									} else {
										select.removeChild(select.querySelector('option[value="' + ng + '"]'))
									}
								}
							}
						</script>
					</div>

					<div class="form-group">
						
						<label for="minPrice">
							<b>Minimum Price</b>
						</label>
						<input class="form-control" id="minPrice" type="number" name="minPrice",
						 value="{{request_form['minPrice']}}">

						<label for="maxPrice">
							<b>Maximum Price</b>
						</label>
						<input class="form-control" id="maxPrice" type="number" name="maxPrice",
						 value="{{request_form['maxPrice']}}">

						<label for="minNight">
							<b>Minimum Nights</b>
						</label>
						<input class="form-control" id="minNight" type="number" name="minNight", 
						 value="{{request_form['minNight']}}">

						<!-- <label for="numReview">
							<b>Mininum Reviews</b>
						</label>
						<input class="form-control" id="minReview" type="number" name="minReview" placeholder="0"> -->
					</div>

					<!-- <div class="form-group">

						<label for="exampleInputEmail1">
							Email address
						</label>
						<input type="email" class="form-control" id="exampleInputEmail1">
					</div>
					
					<div class="form-group">

						<label for="exampleInputPassword1">
							Password
						</label>
						<input type="password" class="form-control" id="exampleInputPassword1">
					</div> -->


					<button type="submit" class="btn btn-primary">
						Search
					</button>
					<button type="reset" class="btn btn-primary">
						Reset
					</button>
				</form>
			</div>
			<div class="col-md-9">
				<div class="tabbable" id="tabs-290381">
					<ul class="nav nav-tabs">
						<li class="nav-item">
							<a class="nav-link active" href="#tab1" data-toggle="tab">Searching/Prediction Result</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="#tab2" data-toggle="tab">Map of Houses</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="#tab3" data-toggle="tab">Data Visualization</a>
						</li>
					</ul>
					<div class="tab-content">
						<div class="tab-pane active" id="tab1">
							<p>
								{% if msg_pred %}
									<div align="left"><b>{{msg_pred}}</b></div>
								{% endif %}

								{% for table in tables %}
								{{ table|safe }}
								{% endfor %}
							</p>
						</div>
						<div class="tab-pane" id="tab2">
							<p>
								<!-- <img alt="Bootstrap Image Preview" src="static/figure/temp_map.png" class="rounded">-->
								{{script1 | safe}}
								{{div1 | safe}}
							</p>
						</div>
						<div class="tab-pane" id="tab3">
							{{script1_count | safe}}
							{{div1_count | safe}}
							<br>
							{{script1_price | safe}}
							{{div1_price | safe}}
							<br>

							Percentage of matching rooms
							<br>
							<img src="{{ img }}"> <!--class="vis-image"-->
							<br>

							<b> Analysis of Entire Dataset: </b>
							<br>
							Correlation Matrix:
							<br>
							<img src="{{ url_for('static', filename='figure/Correlation_Matrix.png') }}"/>
							<br>
							Feature Selection:
							<br>
							<img src="{{ url_for('static', filename='figure/Feature_Selection.png') }}"/>
							<br>
							Room Types:
							<img src="{{ url_for('static', filename='figure/Room_Type.png') }}"/>
						</div>
					</div>
				</div>
				<!-- <ul class="nav">
					<li class="nav-item">
						<a class="nav-link active" href="#">Available Houses</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#">Map</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#">Price Predict</a>
					</li>
					<li class="nav-item">
						<a class="nav-link disabled" href="#">Price Predict</a>
					</li>
					<li class="nav-item dropdown ml-md-auto">
						<a class="nav-link dropdown-toggle" href="http://example.com" id="navbarDropdownMenuLink"
							data-toggle="dropdown">Dropdown link</a>
						<div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
							<a class="dropdown-item" href="#">Action</a> <a class="dropdown-item" href="#">Another
								action</a> <a class="dropdown-item" href="#">Something else here</a>
							<div class="dropdown-divider">
							</div> <a class="dropdown-item" href="#">Separated link</a>
						</div>
					</li>
				</ul> -->
			</div>
		</div>
	</div>


	<script src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
	<script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
	<script src="{{ url_for('static', filename='js/scripts.js') }}"></script>
</body>

</html>